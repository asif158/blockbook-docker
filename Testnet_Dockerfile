# Use a base image
FROM nestybox/ubuntu-focal-systemd-docker

# Install necessary packages
RUN apt update && \
    apt install -y wget gnupg2 software-properties-common unzip

# Download and unzip the source code
RUN wget https://github.com/ranchimall/blockbook-docker/archive/main.zip && \
    unzip main.zip && \
    rm main.zip

# Change working directory to the unzipped source code directory
WORKDIR /blockbook-docker-main

# Install the required Debian packages
RUN apt install -y ./deb-files/dind_backend-flo-testnet_0.15.1.1-satoshilabs-1_amd64.deb && \
    apt install -y ./deb-files/dind_blockbook-flo-testnet_0.4.0_amd64.deb
# Expose ports
EXPOSE 22 80 19166

# Start your applications (Uncomment and replace with your application start commands)
CMD ["/lib/systemd/systemd"]
